{"version":3,"sources":["webpack:///./src/views/files/Files.vue?e1ba","webpack:///src/views/files/Files.vue","webpack:///./src/views/files/Files.vue?34f8","webpack:///./src/views/files/Files.vue","webpack:///./src/views/files/Files.vue?1ef3"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","success","_e","ref","attrs","language","type","id","multiple","on","change","$event","handleFileUploads","staticStyle","position","directives","name","rawName","value","expression","domProps","input","target","composing","comment","count","variant","disabled","click","sendFiles","errors","_l","item","index","key","show","innerHTML","message","staticRenderFns","Filesvue_type_script_lang_js_","data","loader","userFiles","uploadFiles","test","test2","computed","mounted","methods","length","_this","formData","FormData","i","file","append","axios_default","a","post","headers","Authorization","localStorage","getItem","Content-Type","then","response","status","$refs","files","catch","e","console","log","files_Filesvue_type_script_lang_js_","component","Object","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Files_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Files_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/chunk-0deafc54.8c7f01f5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app flex-row bg-theme\"},[_c('div',{staticClass:\"container-fluid bg-theme\"},[_c('b-row',[_c('b-col',{staticClass:\"col-sm-12 col-12 offset-md-1 offset-lg-1 col-md-5 col-lg-5\"},[_c('h1',{staticClass:\"h1 my-3\"},[_vm._v(\"Заполните данные поста\")])])],1),_c('b-row',[_c('b-col',{staticClass:\"col-sm-12 col-12 offset-md-1 offset-lg-1 col-md-5 col-lg-5\"},[(_vm.success)?_c('div',{staticClass:\"alert alert-success alert-dismissable\"},[_vm._v(\"\\n          \"+_vm._s(_vm.success)+\"\\n        \")]):_vm._e()])],1),_c('b-row',[_c('b-col',{staticClass:\"col-sm-12 col-12 offset-md-1 offset-lg-1 col-md-5 col-lg-5\"},[_c('h1',{staticClass:\"h4 my-1\"},[_vm._v(\"Выберите файл\")])])],1),_c('b-row',[_c('b-col',{staticClass:\"col-sm-12 col-12 offset-md-1 offset-lg-1 col-md-10 col-lg-10 d-flex mb-4\"},[_c('input',{ref:\"files\",staticClass:\"form-control-file\",attrs:{\"language\":\"ru\",\"type\":\"file\",\"id\":\"files\",\"multiple\":\"multiple\"},on:{\"change\":function($event){_vm.handleFileUploads()}}})])],1),_c('b-row',[_c('b-col',{staticClass:\"col-sm-12 col-12 offset-md-1 offset-lg-1 col-md-5 col-lg-5\"},[_c('h1',{staticClass:\"h4 my-1\"},[_vm._v(\"Напишите комментарий\")])])],1),_c('b-row',[_c('b-col',{staticClass:\"offset-md-1 col-md-5 col-lg-5 offset-lg-1 col-sm-6 col mb-4 d-flex justify-content-end\",staticStyle:{\"position\":\"relative\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.comment),expression:\"comment\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"comment\"},domProps:{\"value\":(_vm.comment)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.comment=$event.target.value}}}),_c('div',{staticClass:\"count\"},[_vm._v(_vm._s(this.count()))])])],1),_c('b-row',[_c('b-col',{staticClass:\"col-sm-12 col-12 offset-md-1 offset-lg-1 col-md-10 col-lg-10 d-flex\"},[_c('b-button',{staticClass:\"form__btn btn btn-lg btn-primary mb-4 mr-3\",attrs:{\"variant\":\"primary\",\"disabled\":_vm.disabled},on:{\"click\":_vm.sendFiles}},[_vm._v(\"Отправить\")]),(_vm.loader)?_c('div',{staticClass:\"loader\"}):_vm._e()],1)],1),(_vm.errors !== '')?_c('b-row',[_c('b-col',{staticClass:\"offset-md-1 col-md-5 col-lg-5 offset-lg-1 col-sm-6\"},_vm._l((_vm.errors),function(item,index){return _c('b-alert',{key:index,staticClass:\"mb-4\",attrs:{\"show\":\"\",\"variant\":\"danger\"}},[_c('span',{domProps:{\"innerHTML\":_vm._s(item)}})])}))],1):_vm._e(),(_vm.message !== '')?_c('b-row',[_c('b-col',{staticClass:\"offset-md-1 col-md-5 col-lg-5 offset-lg-1 col-sm-6\"},_vm._l((_vm.message),function(item,index){return _c('b-alert',{key:index,staticClass:\"mb-4\",attrs:{\"show\":\"\",\"variant\":\"success\"}},[_vm._v(\"\\n          \"+_vm._s(item)+\"\\n        \")])}))],1):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"app flex-row bg-theme\">\n    <div class=\"container-fluid bg-theme\">\n\n      <b-row>\n        <b-col class=\"col-sm-12 col-12 offset-md-1 offset-lg-1 col-md-5 col-lg-5\">\n          <h1 class=\"h1 my-3\">Заполните данные поста</h1>\n        </b-col>\n      </b-row>\n      <b-row>\n        <b-col class=\"col-sm-12 col-12 offset-md-1 offset-lg-1 col-md-5 col-lg-5\">\n          <div class=\"alert alert-success alert-dismissable\" v-if=\"success\">\n            {{success}}\n          </div>\n        </b-col>\n      </b-row>\n\n      <b-row>\n        <b-col class=\"col-sm-12 col-12 offset-md-1 offset-lg-1 col-md-5 col-lg-5\">\n          <h1 class=\"h4 my-1\">Выберите файл</h1>\n        </b-col>\n      </b-row>\n      <b-row>\n        <b-col class=\"col-sm-12 col-12 offset-md-1 offset-lg-1 col-md-10 col-lg-10 d-flex mb-4\">\n          <input language=\"ru\" type=\"file\" id=\"files\" ref=\"files\" multiple=\"multiple\" class=\"form-control-file\" v-on:change=\"handleFileUploads()\">\n        </b-col>\n      </b-row>\n      <b-row>\n        <b-col class=\"col-sm-12 col-12 offset-md-1 offset-lg-1 col-md-5 col-lg-5\">\n          <h1 class=\"h4 my-1\">Напишите комментарий</h1>\n        </b-col>\n      </b-row>\n      <b-row>\n        <b-col style=\"position: relative;\" class=\"offset-md-1 col-md-5 col-lg-5 offset-lg-1 col-sm-6 col mb-4 d-flex justify-content-end\" >\n          <input  type=\"text\" id=\"comment\" class=\"form-control\" v-model=\"comment\"><div class=\"count\">{{this.count()}}</div>\n        </b-col>\n      </b-row>\n      <b-row >\n        <b-col class=\"col-sm-12 col-12 offset-md-1 offset-lg-1 col-md-10 col-lg-10 d-flex\">\n          <b-button variant=\"primary\" class=\"form__btn btn btn-lg btn-primary mb-4 mr-3\" v-on:click=\"sendFiles\" :disabled=\"disabled\">Отправить</b-button>\n          <div v-if=\"loader\" class=\"loader\"></div>\n        </b-col>\n      </b-row>\n      <b-row v-if=\"errors !== ''\">\n        <b-col class=\"offset-md-1 col-md-5 col-lg-5 offset-lg-1 col-sm-6\">\n          <b-alert v-for=\"(item, index) in errors\" show :key=\"index\" variant=\"danger\" class=\"mb-4\">\n            <span v-html=\"item\"></span>\n          </b-alert>\n        </b-col>\n      </b-row>\n      <b-row v-if=\"message !== ''\">\n        <b-col class=\"offset-md-1 col-md-5 col-lg-5 offset-lg-1 col-sm-6\">\n          <b-alert v-for=\"(item, index) in message\" show :key=\"index\" variant=\"success\" class=\"mb-4\">\n            {{ item }}\n          </b-alert>\n        </b-col>\n      </b-row>\n\n    </div>\n  </div>\n</template>\n\n<script>\n    import axios from 'axios';\n    import { mapGetters } from 'vuex';\n\n    export default {\n      data() {\n        return {\n          errors: '',\n          message: '',\n          success: '',\n          comment: '',\n          disabled: false,\n          loader: false,\n          userFiles: [],\n          uploadFiles: [],\n          test: {},\n          test2: [],\n        };\n      },\n      computed: {\n      },\n      name: 'Files',\n      mounted: function () {\n      },\n      methods: {\n        count: function(){\n          return 255 - this.comment.length;\n        },\n        sendFiles: function () {\n\n          this.errors = '';\n          this.success = '';\n\n          let formData = new FormData();\n\n          if (this.userFiles.length === 0 || this.userFiles.length > 10){\n            this.errors = [\"Выберите файл для загрузки! Можно загрузить не больше 10 штук!\"];\n            return false\n          }\n\n          for( let i = 0; i < this.userFiles.length; i++ ){\n            let file = this.userFiles[i];\n            formData.append('files[' + i + ']', file);\n          }\n\n          formData.append('comment',this.comment);\n\n          this.disabled = true;\n          this.loader = true;\n\n          axios.post( 'http://api.fun-gifs.ru/api/putFiles',\n            formData,\n            {\n              headers: {\n                'Authorization': 'Bearer ' + localStorage.getItem('access_token'),\n                'Content-Type': 'multipart/form-data'\n              }\n            }\n          ).then(response => {\n            if (response.data.status === 'error'){\n              this.errors = response.data.data.errors;\n              this.disabled = false;\n              this.loader = false;\n              return false;\n            }else if(response.data.status === 'message'){\n              return false;\n            }else if(response.data.status === 'ok'){\n              this.userFiles = '';\n              this.success = response.data.data.message[0];\n              this.$refs.files.value = '';\n              this.disabled = false;\n              this.loader = false;\n            }\n          })\n            .catch(e => {\n              console.log(e);\n              this.errors = [\"Ошибка сервера! Попробуйте загрузить файлы еще раз, либо обратитесь в поддержку.\"];\n              this.disabled = false;\n              this.loader = false;\n            });\n\n        },\n        handleFileUploads: function (e) {\n          this.userFiles = this.$refs.files.files;\n        },\n      }\n    }\n</script>\n\n<style>\n  .count {\n    position: absolute;\n    right: 20px;\n    top: 35px;\n    font-size: 12px;\n  }\n\n  .link-container {\n    text-align: center;\n    position: relative;\n    word-break: break-all;\n    max-width: 100px;\n    min-width: 100px;\n  }\n\n  .file-link {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n  }\n\n  .link-container:hover {\n    color: #0ba2ff;\n    text-decoration: none;\n  }\n\n  .bg-theme {\n    background-color: #f6f7f7;\n  }\n  .loader {\n    border: 5px solid #f3f3f3; /* Light grey */\n    border-top: 5px solid #3498db; /* Blue */\n    border-radius: 50%;\n    width: 40px;\n    height: 40px;\n    animation: spin 1s linear infinite;\n  }\n\n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Files.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Files.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Files.vue?vue&type=template&id=74809fdc&\"\nimport script from \"./Files.vue?vue&type=script&lang=js&\"\nexport * from \"./Files.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Files.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"Files.vue\"\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Files.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/lib/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Files.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}